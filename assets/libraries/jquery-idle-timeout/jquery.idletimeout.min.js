!function(a,b){var c={init:function(c,d,e){var g,f=this;this.warning=g=a(c),this.resume=a(d),this.options=e,this.countdownOpen=!1,this.failedRequests=e.failedRequests,this._startTimer(),this.title=document.title,a.data(g[0],"idletimeout",this),a.idleTimer(1e3*e.idleAfter),a(document).bind("idle.idleTimer",function(){"idle"!==a.data(document,"idleTimer")||f.countdownOpen||(f._stopTimer(),f.countdownOpen=!0,f._idle())}),this.resume.bind("click",function(a){a.preventDefault(),b.clearInterval(f.countdown),f.countdownOpen=!1,f._startTimer(),f._keepAlive(!1),e.onResume.call(f.warning)})},_idle:function(){var a=this,c=this.options,d=this.warning[0],e=c.warningLength;c.onIdle.call(d),c.onCountdown.call(d,e),this.countdown=b.setInterval(function(){0===--e?(window.clearInterval(a.countdown),c.onTimeout.call(d)):(c.onCountdown.call(d,e),document.title=c.titleMessage.replace("%s",e)+a.title)},1e3)},_startTimer:function(){var a=this;this.timer=b.setTimeout(function(){a._keepAlive()},1e3*this.options.pollingInterval)},_stopTimer:function(){this.failedRequests=this.options.failedRequests,b.clearTimeout(this.timer)},_keepAlive:function(b){var c=this,d=this.options;return document.title=c.title,"undefined"==typeof b&&(b=!0),this.failedRequests?(a.ajax({timeout:d.AJAXTimeout,url:d.keepAliveURL,error:function(){c.failedRequests--},success:function(b){a.trim(b)!==d.serverResponseEquals&&c.failedRequests--},complete:function(){b&&c._startTimer()}}),void 0):(this._stopTimer(),d.onAbort.call(this.warning[0]),void 0)}};a.idleTimeout=function(b,d,e){return c.init(b,d,a.extend(a.idleTimeout.options,e)),this},a.idleTimeout.options={warningLength:30,keepAliveURL:"",serverResponseEquals:"OK",idleAfter:600,pollingInterval:60,failedRequests:5,AJAXTimeout:250,titleMessage:"Warning: %s seconds until log out | ",onTimeout:a.noop,onIdle:a.noop,onCountdown:a.noop,onResume:a.noop,onAbort:a.noop}}(jQuery,window);