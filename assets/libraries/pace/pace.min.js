/*! pace 0.5.1 */
(function(){var Z,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=[].slice,w={}.hasOwnProperty,x=function(ac,ad){function aa(){this.constructor=ac}for(var ab in ad){w.call(ad,ab)&&(ac[ab]=ad[ab])}return aa.prototype=ad.prototype,ac.prototype=new aa,ac.__super__=ad.prototype,ac},y=[].indexOf||function(ab){for(var ac=0,aa=this.length;aa>ac;ac++){if(ac in this&&this[ac]===ab){return ac}}return -1};for(R={catchupTime:500,initialRate:0.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:".pace-container",elements:{checkInterval:100,selectors:[".pace-container"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},a=function(){var aa;return null!=(aa="undefined"!=typeof performance&&null!==performance?"function"==typeof performance.now?performance.now():void 0:void 0)?aa:+new Date},c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Q=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==c&&(c=function(aa){return setTimeout(aa,50)},Q=function(aa){return clearTimeout(aa)}),e=function(ab){var ac,aa;return ac=a(),(aa=function(){var ad;return ad=a()-ac,ad>=33?(ac=a(),ab(ad,function(){return c(aa)})):setTimeout(aa,33-ad)})()},d=function(){var ab,ac,aa;return aa=arguments[0],ac=arguments[1],ab=3<=arguments.length?v.call(arguments,2):[],"function"==typeof aa[ac]?aa[ac].apply(aa,ab):aa[ac]},S=function(){var ae,af,ag,aa,ab,ac,ad;for(af=arguments[0],aa=2<=arguments.length?v.call(arguments,1):[],ac=0,ad=aa.length;ad>ac;ac++){if(ag=aa[ac]){for(ae in ag){w.call(ag,ae)&&(ab=ag[ae],null!=af[ae]&&"object"==typeof af[ae]&&null!=ab&&"object"==typeof ab?S(af[ae],ab):af[ae]=ab)}}}return af},N=function(ae){var af,aa,ab,ac,ad;for(aa=af=0,ac=0,ad=ae.length;ad>ac;ac++){ab=ae[ac],aa+=Math.abs(ab),af++}return aa/af},U=function(ae,af){var aa,ab,ac;if(null==ae&&(ae="options"),null==af&&(af=!0),ac=document.querySelector("[data-pace-"+ae+"]")){if(aa=ac.getAttribute("data-pace-"+ae),!af){return aa}try{return JSON.parse(aa)}catch(ad){return ab=ad,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",ab):void 0}}},E=function(){function aa(){}return aa.prototype.on=function(ae,af,ab,ac){var ad;return null==ac&&(ac=!1),null==this.bindings&&(this.bindings={}),null==(ad=this.bindings)[ae]&&(ad[ae]=[]),this.bindings[ae].push({handler:af,ctx:ab,once:ac})},aa.prototype.once=function(ac,ad,ab){return this.on(ac,ad,ab,!0)},aa.prototype.off=function(ae,af){var ab,ac,ad;if(null!=(null!=(ac=this.bindings)?ac[ae]:void 0)){if(null==af){return delete this.bindings[ae]}for(ab=0,ad=[];ab<this.bindings[ae].length;){this.bindings[ae][ab].handler===af?ad.push(this.bindings[ae].splice(ab,1)):ad.push(ab++)}return ad}},aa.prototype.trigger=function(){var ab,ac,ad,ae,af,ag,ah,ai,aj;if(ad=arguments[0],ab=2<=arguments.length?v.call(arguments,1):[],null!=(ah=this.bindings)?ah[ad]:void 0){for(af=0,aj=[];af<this.bindings[ad].length;){ai=this.bindings[ad][af],ae=ai.handler,ac=ai.ctx,ag=ai.once,ae.apply(null!=ac?ac:this,ab),ag?aj.push(this.bindings[ad].splice(af,1)):aj.push(af++)}return aj}},aa}(),null==window.Pace&&(window.Pace={}),S(Pace,E.prototype),b=Pace.options=S({},R,window.paceOptions,U()),s=["ajax","document","eventLag","elements"],o=0,q=s.length;q>o;o++){i=s[o],b[i]===!0&&(b[i]=R[i])}G=function(aa){function ab(){return t=ab.__super__.constructor.apply(this,arguments)}return x(ab,aa),ab}(Error),z=function(){function aa(){this.progress=0}return aa.prototype.getElement=function(){var ab;if(null==this.el){if(ab=document.querySelector(b.target),!ab){throw new G}this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=ab.firstChild?ab.insertBefore(this.el,ab.firstChild):ab.appendChild(this.el)}return this.el},aa.prototype.finish=function(){var ab;return ab=this.getElement(),ab.className=ab.className.replace("pace-active",""),ab.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},aa.prototype.update=function(ab){return this.progress=ab,this.render()},aa.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(ab){G=ab}return this.el=void 0},aa.prototype.render=function(){var ab,ac;return null==document.querySelector(b.target)?!1:(ab=this.getElement(),ab.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(ab.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?ac="99":(ac=this.progress<10?"0":"",ac+=0|this.progress),ab.children[0].setAttribute("data-progress",""+ac)),this.lastRenderedProgress=this.progress)},aa.prototype.done=function(){return this.progress>=100},aa}(),F=function(){function aa(){this.bindings={}}return aa.prototype.trigger=function(af,ag){var ah,ab,ac,ad,ae;if(null!=this.bindings[af]){for(ad=this.bindings[af],ae=[],ab=0,ac=ad.length;ac>ab;ab++){ah=ad[ab],ae.push(ah.call(this,ag))}return ae}},aa.prototype.on=function(ac,ad){var ab;return null==(ab=this.bindings)[ac]&&(ab[ac]=[]),this.bindings[ac].push(ad)},aa}(),n=window.XMLHttpRequest,m=window.XDomainRequest,l=window.WebSocket,T=function(ae,af){var ag,aa,ab,ac;ac=[];for(aa in af.prototype){try{ab=af.prototype[aa],null==ae[aa]&&"function"!=typeof ab?ac.push(ae[aa]=ab):ac.push(void 0)}catch(ad){ag=ad}}return ac},X=[],Pace.ignore=function(){var ab,ac,aa;return ac=arguments[0],ab=2<=arguments.length?v.call(arguments,1):[],X.unshift("ignore"),aa=ac.apply(null,ab),X.shift(),aa},Pace.track=function(){var ab,ac,aa;return ac=arguments[0],ab=2<=arguments.length?v.call(arguments,1):[],X.unshift("track"),aa=ac.apply(null,ab),X.shift(),aa},h=function(aa){var ab;if(null==aa&&(aa="GET"),"track"===X[0]){return"force"}if(!X.length&&b.ajax){if("socket"===aa&&b.ajax.trackWebSockets){return !0}if(ab=aa.toUpperCase(),y.call(b.ajax.trackMethods,ab)>=0){return !0}}return !1},H=function(aa){function ab(){var ac,ad=this;ab.__super__.constructor.apply(this,arguments),ac=function(ae){var af;return af=ae.open,ae.open=function(ah,ag){return h(ah)&&ad.trigger("request",{type:ah,url:ag,request:ae}),af.apply(ae,arguments)}},window.XMLHttpRequest=function(ae){var af;return af=new n(ae),ac(af),af},T(window.XMLHttpRequest,n),null!=m&&(window.XDomainRequest=function(){var ae;return ae=new m,ac(ae),ae},T(window.XDomainRequest,m)),null!=l&&b.ajax.trackWebSockets&&(window.WebSocket=function(af,ag){var ae;return ae=null!=ag?new l(af,ag):new l(af),h("socket")&&ad.trigger("request",{type:"socket",url:af,protocols:ag,request:ae}),ae},T(window.WebSocket,l))}return x(ab,aa),ab}(F),p=null,V=function(){return null==p&&(p=new H),p},g=function(ad){var ae,aa,ab,ac;for(ac=b.ajax.ignoreURLs,aa=0,ab=ac.length;ab>aa;aa++){if(ae=ac[aa],"string"==typeof ae){if(-1!==ad.indexOf(ae)){return !0}}else{if(ae.test(ad)){return !0}}}return !1},V().on("request",function(ab){var aa,ac,ad,ae,af;return ae=ab.type,ad=ab.request,af=ab.url,g(af)?void 0:Pace.running||b.restartOnRequestAfter===!1&&"force"!==h(ae)?void 0:(ac=arguments,aa=b.restartOnRequestAfter||0,"boolean"==typeof aa&&(aa=0),setTimeout(function(){var ak,aj,al,ag,ah,ai;if(ak="socket"===ae?ad.readyState<2:0<(ag=ad.readyState)&&4>ag){for(Pace.restart(),ah=Pace.sources,ai=[],aj=0,al=ah.length;al>aj;aj++){if(i=ah[aj],i instanceof Z){i.watch.apply(i,ac);break}ai.push(void 0)}return ai}},aa))}),Z=function(){function aa(){var ab=this;this.elements=[],V().on("request",function(){return ab.watch.apply(ab,arguments)})}return aa.prototype.watch=function(ae){var af,ab,ac,ad;return ac=ae.type,af=ae.request,ad=ae.url,g(ad)?void 0:(ab="socket"===ac?new K(af):new L(af),this.elements.push(ab))},aa}(),L=function(){function aa(ae){var af,ag,ah,ai,ab,ac,ad=this;if(this.progress=0,null!=window.ProgressEvent){for(ag=null,ae.addEventListener("progress",function(aj){return ad.progress=aj.lengthComputable?100*aj.loaded/aj.total:ad.progress+(100-ad.progress)/2}),ac=["load","abort","timeout","error"],ah=0,ai=ac.length;ai>ah;ah++){af=ac[ah],ae.addEventListener(af,function(){return ad.progress=100})}}else{ab=ae.onreadystatechange,ae.onreadystatechange=function(){var aj;return 0===(aj=ae.readyState)||4===aj?ad.progress=100:3===ae.readyState&&(ad.progress=50),"function"==typeof ab?ab.apply(null,arguments):void 0}}}return aa}(),K=function(){function aa(af){var ag,ab,ac,ad,ae=this;for(this.progress=0,ad=["error","open"],ab=0,ac=ad.length;ac>ab;ab++){ag=ad[ab],af.addEventListener(ag,function(){return ae.progress=100})}}return aa}(),B=function(){function aa(ae){var af,ab,ac,ad;for(null==ae&&(ae={}),this.elements=[],null==ae.selectors&&(ae.selectors=[]),ad=ae.selectors,ab=0,ac=ad.length;ac>ab;ab++){af=ad[ab],this.elements.push(new C(af))}}return aa}(),C=function(){function aa(ab){this.selector=ab,this.progress=0,this.check()}return aa.prototype.check=function(){var ab=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return ab.check()},b.elements.checkInterval)},aa.prototype.done=function(){return this.progress=100},aa}(),A=function(){function aa(){var ac,ad,ab=this;this.progress=null!=(ad=this.states[document.readyState])?ad:100,ac=document.onreadystatechange,document.onreadystatechange=function(){return null!=ab.states[document.readyState]&&(ab.progress=ab.states[document.readyState]),"function"==typeof ac?ac.apply(null,arguments):void 0}}return aa.prototype.states={loading:0,interactive:50,complete:100},aa}(),D=function(){function aa(){var af,ag,ab,ac,ad,ae=this;this.progress=0,af=0,ad=[],ac=0,ab=a(),ag=setInterval(function(){var ah;return ah=a()-ab-50,ab=a(),ad.push(ah),ad.length>b.eventLag.sampleCount&&ad.shift(),af=N(ad),++ac>=b.eventLag.minSamples&&af<b.eventLag.lagThreshold?(ae.progress=100,clearInterval(ag)):ae.progress=100*(3/(af+3))},50)}return aa}(),J=function(){function aa(ab){this.source=ab,this.last=this.sinceLastUpdate=0,this.rate=b.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=d(this.source,"progress"))}return aa.prototype.tick=function(ac,ad){var ab;return null==ad&&(ad=d(this.source,"progress")),ad>=100&&(this.done=!0),ad===this.last?this.sinceLastUpdate+=ac:(this.sinceLastUpdate&&(this.rate=(ad-this.last)/this.sinceLastUpdate),this.catchup=(ad-this.progress)/b.catchupTime,this.sinceLastUpdate=0,this.last=ad),ad>this.progress&&(this.progress+=this.catchup*ac),ab=1-Math.pow(this.progress/100,b.easeFactor),this.progress+=ab*this.rate*ac,this.progress=Math.min(this.lastProgress+b.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},aa}(),j=null,f=null,O=null,k=null,M=null,P=null,Pace.running=!1,W=function(){return b.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(r=window.history.pushState,window.history.pushState=function(){return W(),r.apply(window.history,arguments)}),null!=window.history.replaceState&&(u=window.history.replaceState,window.history.replaceState=function(){return W(),u.apply(window.history,arguments)}),I={ajax:Z,elements:B,document:A,eventLag:D},(Y=function(){var ab,af,ag,ah,aa,ac,ad,ae;for(Pace.sources=j=[],ac=["ajax","elements","document","eventLag"],af=0,ah=ac.length;ah>af;af++){ab=ac[af],b[ab]!==!1&&j.push(new I[ab](b[ab]))}for(ae=null!=(ad=b.extraSources)?ad:[],ag=0,aa=ae.length;aa>ag;ag++){i=ae[ag],j.push(new i(b))}return Pace.bar=O=new z,f=[],k=new J})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,O.destroy(),P=!0,null!=M&&("function"==typeof Q&&Q(M),M=null),Y()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var aa;return Pace.running=!0,O.render(),aa=a(),P=!1,M=e(function(ac,ae){var ag,ai,aj,ak,al,am,ao,aq,ab,ad,af,ah,an,ap,ar,at;for(aq=100-O.progress,ai=af=0,aj=!0,am=ah=0,ap=j.length;ap>ah;am=++ah){for(i=j[am],ad=null!=f[am]?f[am]:f[am]=[],al=null!=(at=i.elements)?at:[i],ao=an=0,ar=al.length;ar>an;ao=++an){ak=al[ao],ab=null!=ad[ao]?ad[ao]:ad[ao]=new J(ak),aj&=ab.done,ab.done||(ai++,af+=ab.tick(ac))}}return ag=af/ai,O.update(k.tick(ac,ag)),O.done()||aj||P?(O.update(100),Pace.trigger("done"),setTimeout(function(){return O.finish(),Pace.running=!1,Pace.trigger("hide")},Math.max(b.ghostTime,Math.max(b.minTime-(a()-aa),0)))):ae()})},Pace.start=function(aa){S(b,aa),Pace.running=!0;try{O.render()}catch(ab){G=ab}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define(function(){return Pace}):"object"==typeof exports?module.exports=Pace:b.startOnPageLoad&&Pace.start()}).call(this);