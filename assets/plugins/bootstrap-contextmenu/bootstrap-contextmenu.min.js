!function(a){"use strict";var b='[data-toggle="context"]',c=function(b,c){this.$element=a(b),this.before=c.before||this.before,this.onItem=c.onItem||this.onItem,this.scopes=c.scopes||null,c.target&&this.$element.data("target",c.target),this.listen()};c.prototype={constructor:c,show:function(b){var c,d,e,f,g={relatedTarget:this,target:b.currentTarget};if(!this.isDisabled()&&(this.closemenu(),this.before.call(this,b,a(b.currentTarget))))return c=this.getMenu(),c.trigger(d=a.Event("show.bs.context",g)),e=this.getPosition(b,c),f="li:not(.divider)",c.attr("style","").css(e).addClass("open").on("click.context.data-api",f,a.proxy(this.onItem,this,a(b.currentTarget))).trigger("shown.bs.context",g),a("html").on("click.context.data-api",c.selector,a.proxy(this.closemenu,this)),!1},closemenu:function(){var c,d,e,f;return c=this.getMenu(),c.hasClass("open")?(f={relatedTarget:this},c.trigger(d=a.Event("hide.bs.context",f)),e="li:not(.divider)",c.removeClass("open").off("click.context.data-api",e).trigger("hidden.bs.context",f),a("html").off("click.context.data-api",c.selector),!1):void 0},keydown:function(a){27==a.which&&this.closemenu(a)},before:function(){return!0},onItem:function(){return!0},listen:function(){this.$element.on("contextmenu.context.data-api",this.scopes,a.proxy(this.show,this)),a("html").on("click.context.data-api",a.proxy(this.closemenu,this)),a("html").on("keydown.context.data-api",a.proxy(this.keydown,this))},destroy:function(){this.$element.off(".context.data-api").removeData("context"),a("html").off(".context.data-api")},isDisabled:function(){return this.$element.hasClass("disabled")||this.$element.attr("disabled")},getMenu:function(){var c,b=this.$element.data("target");return b||(b=this.$element.attr("href"),b=b&&b.replace(/.*(?=#[^\s]*$)/,"")),c=a(b),c&&c.length?c:this.$element.find(b)},getPosition:function(b,c){var k,l,m,d=b.clientX,e=b.clientY,f=a(window).width(),g=a(window).height(),h=c.find(".dropdown-menu").outerWidth(),i=c.find(".dropdown-menu").outerHeight(),j={position:"absolute","z-index":9999};return k=e+i>g?{top:e-i+a(window).scrollTop()}:{top:e+a(window).scrollTop()},l=d+h>f&&d-h>0?{left:d-h+a(window).scrollLeft()}:{left:d+a(window).scrollLeft()},m=c.offsetParent().offset(),l.left=l.left-m.left,k.top=k.top-m.top,a.extend(j,k,l)}},a.fn.contextmenu=function(b,d){return this.each(function(){var e=a(this),f=e.data("context"),g="object"==typeof b&&b;f||e.data("context",f=new c(e,g)),"string"==typeof b&&f[b].call(f,d)})},a.fn.contextmenu.Constructor=c,a(document).on("contextmenu.context.data-api",function(){a(b).each(function(){var b=a(this).data("context");b&&b.closemenu()})}).on("contextmenu.context.data-api",b,function(b){a(this).contextmenu("show",b),b.preventDefault(),b.stopPropagation()})}(jQuery);