var Layout=function(){var a="img/",b="css/",c=app.getResponsiveBreakpoint("md"),d=function(a,b){var d=location.hash.toLowerCase(),e=$(".page-sidebar-menu");"click"===a||"set"===a?b=$(b):"match"===a&&e.find("li > a").each(function(){var a=$(this).attr("href").toLowerCase();return a.length>1&&d.substr(1,a.length-1)==a.substr(1)?(b=$(this),void 0):void 0}),b&&0!=b.size()&&"javascript:;"!==b.attr("href").toLowerCase()&&"#"!==b.attr("href").toLowerCase()&&(parseInt(e.data("slide-speed")),e.data("keep-expanded"),e.find("li.active").removeClass("active"),e.find("li > a > .selected").remove(),e.hasClass("page-sidebar-menu-hover-submenu")===!1?e.find("li.open").each(function(){0===$(this).children(".sub-menu").size()&&($(this).removeClass("open"),$(this).find("> a > .arrow.open").removeClass("open"))}):e.find("li.open").removeClass("open"),b.parents("li").each(function(){$(this).addClass("active"),$(this).find("> a > span.arrow").addClass("open"),1===$(this).parent("ul.page-sidebar-menu").size()&&$(this).find("> a").append('<span class="selected"></span>'),1===$(this).children("ul.sub-menu").size()&&$(this).addClass("open")}),"click"===a&&app.getViewPort().width<c&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click())},e=function(){$(".page-header .menu-toggler").on("click",function(){if(app.getViewPort().width<c){var b=$(".page-header .page-header-menu");b.hasClass("page-header-menu-opened")?(b.slideUp(300),b.removeClass("page-header-menu-opened")):(b.slideDown(300),b.addClass("page-header-menu-opened")),$("body").hasClass("page-header-top-fixed")&&app.scrollTop()}}),$(".dropdown-submenu > a").on("click",function(a){app.getViewPort().width<c&&$(this).next().hasClass("dropdown-menu")&&(a.stopPropagation(),$(this).parent().hasClass("open")?($(this).parent().removeClass("open"),$(this).next().hide()):($(this).parent().addClass("open"),$(this).next().show()))}),app.getViewPort().width>=c&&$('[data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover(),$(this).addClass("hover-initialized")}),$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(a){a.stopPropagation()}),$(window).scroll(function(){var a=75;$("body").hasClass("page-header-menu-fixed")&&($(window).scrollTop()>a?$(".page-header-menu").addClass("fixed"):$(".page-header-menu").removeClass("fixed")),$("body").hasClass("page-header-top-fixed")&&($(window).scrollTop()>a?$(".page-header-top").addClass("fixed"):$(".page-header-top").removeClass("fixed"))})},f=function(){$(".page-sidebar").on("click","li > a",function(a){if(!(app.getViewPort().width>=c&&1===$(this).parents(".page-sidebar-menu-hover-submenu").size())){if($(this).next().hasClass("sub-menu")===!1)return app.getViewPort().width<c&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click(),void 0;if(!$(this).next().hasClass("sub-menu always-open")){var b=$(this).parent().parent(),d=$(this),e=$(".page-sidebar-menu"),f=$(this).next(),g=e.data("auto-scroll"),h=parseInt(e.data("slide-speed")),i=e.data("keep-expanded");i!==!0&&(b.children("li.open").children("a").children(".arrow").removeClass("open"),b.children("li.open").children(".sub-menu:not(.always-open)").slideUp(h),b.children("li.open").removeClass("open"));var j=-200;f.is(":visible")?($(".arrow",$(this)).removeClass("open"),$(this).parent().removeClass("open"),f.slideUp(h,function(){g===!0&&$("body").hasClass("page-sidebar-closed")===!1&&($("body").hasClass("page-sidebar-fixed")?e.slimScroll({scrollTo:d.position().top}):app.scrollTo(d,j))})):($(".arrow",$(this)).addClass("open"),$(this).parent().addClass("open"),f.slideDown(h,function(){g===!0&&$("body").hasClass("page-sidebar-closed")===!1&&($("body").hasClass("page-sidebar-fixed")?e.slimScroll({scrollTo:d.position().top}):app.scrollTo(d,j))})),a.preventDefault()}}})},g=function(){var a=app.getViewPort().height-$(".page-header").outerHeight()-30;return $("body").hasClass("page-footer-fixed")&&(a-=$(".page-footer").outerHeight()),a},h=function(){var a=$(".page-sidebar-menu");app.destroySlimScroll(a),0!==$(".page-sidebar-fixed").size()&&app.getViewPort().width>=c&&(a.attr("data-height",g()),app.initSlimScroll(a))},i=function(){var a=$("body");a.hasClass("page-sidebar-fixed")&&$(".page-sidebar").on("mouseenter",function(){a.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed")}).on("mouseleave",function(){a.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed")})},j=function(){var a=$("body");$.cookie&&"1"===$.cookie("sidebar_closed")&&app.getViewPort().width>=c&&($("body").addClass("page-sidebar-closed"),$(".page-sidebar-menu").addClass("page-sidebar-menu-closed")),$("body").on("click",".sidebar-toggler",function(){var c=$(".page-sidebar"),d=$(".page-sidebar-menu");$(".sidebar-search",c).removeClass("open"),a.hasClass("page-sidebar-closed")?(a.removeClass("page-sidebar-closed"),d.removeClass("page-sidebar-menu-closed"),$.cookie&&$.cookie("sidebar_closed","0")):(a.addClass("page-sidebar-closed"),d.addClass("page-sidebar-menu-closed"),a.hasClass("page-sidebar-fixed")&&d.trigger("mouseleave"),$.cookie&&$.cookie("sidebar_closed","1")),$(window).trigger("resize")}),i(),$(".page-sidebar").on("click",".sidebar-search .remove",function(a){a.preventDefault(),$(".sidebar-search").removeClass("open")}),$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(a){return 13==a.which?($(".sidebar-search").submit(),!1):void 0}),$(".sidebar-search .submit").on("click",function(a){a.preventDefault(),$("body").hasClass("page-sidebar-closed")?$(".sidebar-search").hasClass("open")===!1?(1===$(".page-sidebar-fixed").size()&&$(".page-sidebar .sidebar-toggler").click(),$(".sidebar-search").addClass("open")):$(".sidebar-search").submit():$(".sidebar-search").submit()}),0!==$(".sidebar-search").size()&&($(".sidebar-search .input-group").on("click",function(a){a.stopPropagation()}),$("body").on("click",function(){$(".sidebar-search").hasClass("open")&&$(".sidebar-search").removeClass("open")}))},k=function(){$(".page-header").on("click",".search-form",function(){$(this).addClass("open"),$(this).find(".form-control").focus(),$(".page-header .search-form .form-control").on("blur",function(){$(this).closest(".search-form").removeClass("open"),$(this).unbind("blur")})}),$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(a){return 13==a.which?($(this).closest(".search-form").submit(),!1):void 0}),$(".page-header").on("mousedown",".search-form.open .submit",function(a){a.preventDefault(),a.stopPropagation(),$(this).closest(".search-form").submit()})},l=function(){var a;$("body").height()<app.getViewPort().height&&(a=app.getViewPort().height-$(".page-header").outerHeight()-($(".page-container").outerHeight()-$(".page-content").outerHeight())-$(".page-prefooter").outerHeight()-$(".page-footer").outerHeight(),$(".page-content").css("min-height",a))},m=function(){var a=300,b=500;navigator.userAgent.match(/iPhone|iPad|iPod/i)?$(window).bind("touchend touchcancel touchleave",function(){$(this).scrollTop()>a?$(".scroll-to-top").fadeIn(b):$(".scroll-to-top").fadeOut(b)}):$(window).scroll(function(){$(this).scrollTop()>a?$(".scroll-to-top").fadeIn(b):$(".scroll-to-top").fadeOut(b)}),$(".scroll-to-top").click(function(a){return a.preventDefault(),$("html, body").animate({scrollTop:0},b),!1})},n=function(){$(document).on("click",".ajaxify",function(a){a.preventDefault(),app.scrollTop();var b=$(this).attr("href"),c=$(this).attr("data-method"),d=$(this).attr("data-params"),e=$(this).attr("data-container"),f="true"==$(this).attr("data-prevent_history_state")?!0:!1;Layout.ajaxify(b,c,d,e,f)}),$(document).on("click",".page-header-fixed-mobile .responsive-toggler",function(){app.scrollTop()}),$(window).bind("popstate",function(a){var b=a.originalEvent.state;b?Layout.ajaxify(b.href,b.method,b.params,b.container,!0):Layout.ajaxify(location.href,void 0,void 0,void 0,!0)})};return{initHeader:function(){k()},initMainMenu:function(){e()},setSidebarMenuActiveLink:function(a,b){d(a,b)},initSidebar:function(){h(),f(),j(),app.isAngularJsApp()&&d("match"),app.addResizeHandler(h)},initContent:function(){},initFooter:function(){m()},initAjaxify:function(){n()},init:function(){this.initHeader(),this.initMainMenu(),this.initSidebar(),this.initContent(),this.fixContentHeight(),this.initFooter(),this.initAjaxify()},fixContentHeight:function(){l()},initFixedSidebarHoverEffect:function(){i()},initFixedSidebar:function(){h()},getLayoutImgPath:function(){return app.getAssetsPath()+a},getLayoutCssPath:function(){return app.getAssetsPath()+b},ajaxify:function(a,b,c,d,e){var b=void 0===b?"GET":b,c=void 0===c?null:c,d=void 0===d?$(".page-content .container"):$(d);$.ajax({type:b,url:a,data:c,dataType:"html",success:function(f){d.addClass("animate"),setTimeout(function(){1!=e&&history.pushState({href:a,method:b,params:c,container:d.selector},document.title,a),d.html(f),d.removeClass("animate"),Layout.fixContentHeight(),app.initAjax()},50)},error:function(){}})},logout:function(a,b){if($(".top-menu .user-btn").hide(),$(".top-menu .login-btn").show(),$(".top-menu .user-btn .username").text(""),1==b)Layout.ajaxify(a);else{var a=void 0===a?document.origin:a;history.replaceState(null,document.title,a)}}}}();