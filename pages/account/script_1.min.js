page_script({init:function(){$.fn.editable.defaults.ajaxOptions={type:"POST"},$.fn.editable.defaults.type="text",$.fn.editable.defaults.pk=1,$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.inputclass="form-control",$.fn.editable.defaults.url=location.origin+"/account/set_user_attrib",$.fn.editable.defaults.onblur="submit",$("#displayname").editable({name:"displayname",success:function(a,b){$(".top-menu .user-btn .username").text(b),$(".profile-usertitle-name").text(b)}}),$("#email").editable({name:"email"}),$("#mobile").editable({name:"mobile"});var a=function(){$(".success_msg").hide(),$(".new_password_min_length_error").hide(),$(".old_password_error").hide(),$(".unhandled_error").hide()};$("#login_form input[name=oldpassword]").change(a),$("#login_form input[name=newpassword]").change(a),$("#password_form").ajaxForm({beforeSubmit:a,success:function(a){try{parsed=JSON.parse(a),"success"==parsed.status?($(".success_msg").show(),$("#password_form")[0].reset()):"new_password_min_length_error"==parsed.status?($(".new_password_min_length_error").show(),$("#login_form input[name=newpassword]").val(""),$("#login_form input[name=newpassword]").focus()):"not_logged_in"==parsed.status?Layout.logout(location.origin+"/login",!0):"old_password_error"==parsed.status?($(".old_password_error .remaining_attempts").text(parsed.params.remaining_attempts),$(".old_password_error").show(),$("#login_form input[name=oldpassword]").val(""),$("#login_form input[name=oldpassword]").focus()):(console.log(a),$(".unhandled_error").show())}catch(b){console.log(a),$(".unhandled_error").show()}}})}});