page_script({init:function(){$.fn.editable.defaults.ajaxOptions={type:"POST"},$.fn.editable.defaults.type="text",$.fn.editable.defaults.pk=1,$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.inputclass="form-control",$.fn.editable.defaults.url=location.href,$.fn.editable.defaults.onblur="submit",$(".editable").editable({params:function(a){return a.for="company",a}}),$(".categories-editable").editable({mode:"popup",params:function(a){return a.for="company",a},select2:{tags:JSON.parse($(".categories-editable").attr("data-available"))}}),$(".seat_editable").editable({params:function(a){return a.for="seat",a}}),$(".product_editable").editable({params:function(a){return a.for="product",a}}),$(".service_editable").editable({params:function(a){return a.for="service",a}}),$(".map-canvas").each(function(){$(this).locationpicker({location:{latitude:$(this).attr("data-latitude"),longitude:$(this).attr("data-longitude")},radius:0,zoom:13,enableAutocomplete:!0,scrollwheel:!1,onchanged:function(a){$.ajax({url:location.href,type:"POST",data:{geolocation:$(this).attr("data-pk"),latitude:a.latitude,longitude:a.longitude},success:function(a){try{var b=JSON.parse(a);"success"!=b.status&&console.log(a)}catch(c){console.log(a)}},error:function(a){console.log(a)}})}})}),$(".new_service").click(function(){$.ajax({url:location.href,type:"POST",data:{new_service:!0},success:function(a){try{var c=JSON.parse(a);switch(c.status){case"success":var e=$("#new_service_template").clone();e.attr("data-id",c.id),$(".service_editable",e).attr("data-pk",c.id).editable({params:function(a){return a.for="service",a}}),$(".delete",e).click(function(a){b(a,this)}),$("input[type=file]",e).change(function(a){d(a,this)}),e.prependTo("#services_list").show(),$("[href='#services_list']").click(),app.scrollTo(e,-200),e.pulsate({color:"#399bc3",repeat:2});break;default:console.log(a)}}catch(f){console.log(a)}},error:function(a){console.log(a)}})}),$(".new_product").click(function(){$.ajax({url:location.href,type:"POST",data:{new_product:!0},success:function(b){try{var d=JSON.parse(b);switch(d.status){case"success":var e=$("#new_product_template").clone();e.attr("data-id",d.id),$(".product_editable",e).attr("data-pk",d.id).editable({params:function(a){return a.for="product",a}}),$(".delete",e).click(function(b){a(b,this)}),$("input[type=file]",e).change(function(a){c(a,this)}),e.prependTo("#products_list").show(),$("[href='#products_list']").click(),app.scrollTo(e,-200),e.pulsate({color:"#399bc3",repeat:2});break;default:console.log(b)}}catch(f){console.log(b)}},error:function(a){console.log(a)}})});var a=function(a,b){a.preventDefault();var c=$(b).parents(".product");$.ajax({url:location.href,type:"POST",data:{delete_product:c.attr("data-id")},success:function(a){try{var b=JSON.parse(a);switch(b.status){case"success":c.remove();break;default:console.log(a)}}catch(d){console.log(a)}},error:function(a){console.log(a)}})},b=function(a,b){a.preventDefault();var c=$(b).parents(".service");$.ajax({url:location.href,type:"POST",data:{delete_service:c.attr("data-id")},success:function(a){try{var b=JSON.parse(a);switch(b.status){case"success":c.remove();break;default:console.log(a)}}catch(d){console.log(a)}},error:function(a){console.log(a)}})};$(".service .delete").click(function(a){b(a,this)}),$(".product .delete").click(function(b){a(b,this)});var c=function(a,b){if(0!=b.files.length){var c=$(".product form"),d=new FormData(c[0]);d.append("file","product_image"),d.append("pk",$(b).parents(".product").attr("data-id")),$.ajax({url:location.href,type:"POST",data:d,enctype:"multipart/form-data",processData:!1,contentType:!1,success:function(a){"success"!=a&&console.log(a)},error:function(a){console.log(a)}})}},d=function(a,b){if(0!=b.files.length){var c=$(".service form"),d=new FormData(c[0]);d.append("file","service_image"),d.append("pk",$(b).parents(".service").attr("data-id")),$.ajax({url:location.href,type:"POST",data:d,enctype:"multipart/form-data",processData:!1,contentType:!1,success:function(a){"success"!=a&&console.log(a)},error:function(a){console.log(a)}})}};$(".service input[type=file]").change(function(a){d(a,this)}),$(".product input[type=file]").change(function(a){c(a,this)}),$(".logo input[type=file]").change(function(){if(0!=this.files.length){var b=$(".logo form"),c=new FormData(b[0]);c.append("file","logo"),$.ajax({url:location.href,type:"POST",data:c,enctype:"multipart/form-data",processData:!1,contentType:!1,success:function(a){"success"!=a&&console.log(a)},error:function(a){console.log(a)}})}})}});