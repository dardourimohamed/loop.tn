page_script({init:function(){$.fn.editable.defaults.ajaxOptions={type:"POST"},$.fn.editable.defaults.type="text",$.fn.editable.defaults.pk=1,$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.inputclass="form-control",$.fn.editable.defaults.url=location.href,$.fn.editable.defaults.onblur="submit",$(".editable").editable({params:function(a){return a.for="company",a}}),$(".seat_editable").editable({params:function(a){return a.for="seat",a}}),$(".product_editable").editable({params:function(a){return a.for="product",a}}),$(".service_editable").editable({params:function(a){return a.for="service",a}}),$(".map-canvas").each(function(){var a=new google.maps.LatLng($(this).attr("data-latitude"),$(this).attr("data-longitude")),b={scrollwheel:!1,zoom:13,center:a},c=new google.maps.Map($(this)[0],b),d=new google.maps.Marker({position:a});d.setMap(c)}),$("#new_product_modal form").submit(function(a){a.preventDefault();var b=$(this);$.ajax({url:location.href,type:"POST",data:$(b).serialize(),success:function(a){try{var c=JSON.parse(a);switch(c.status){case"success":var d=$("#new_product_template").clone();d.attr("data-id",c.id),$(".name",d).text($("[name='product_name']",b).val()).attr("data-pk",c.id),$(".description",d).text($("[name='product_description']",b).val()).attr("data-pk",c.id),$(".price",d).text($("[name='product_price']",b).val()).attr("data-pk",c.id),$(".product_editable",d).editable({params:function(a){return a.for="product",a}}),$("#new_product_modal").modal("hide"),b[0].reset(),d.prependTo("#products_list").show(),$("[href='#products_list']").click(),d.pulsate({color:"#399bc3",repeat:!1});break;default:console.log(a)}}catch(e){console.log(a)}},error:function(a){console.log(a)}})}),$("#new_service_modal form").submit(function(a){a.preventDefault();var b=$(this);$.ajax({url:location.href,type:"POST",data:$(b).serialize(),success:function(a){try{var c=JSON.parse(a);switch(c.status){case"success":var d=$("#new_service_template").clone();d.attr("data-id",c.id),$(".name",d).text($("[name='service_name']",b).val()).attr("data-pk",c.id),$(".description",d).text($("[name='service_description']",b).val()).attr("data-pk",c.id),$(".price",d).text($("[name='service_price']",b).val()).attr("data-pk",c.id),$(".service_editable",d).editable({params:function(a){return a.for="service",a}}),$("#new_service_modal").modal("hide"),b[0].reset(),d.prependTo("#services_list").removeAttr("id").show(),$("[href='#services_list']").click(),d.pulsate({color:"#399bc3",repeat:!1});break;default:console.log(a)}}catch(e){console.log(a)}},error:function(a){console.log(a)}})}),$(".product .delete").live("click",function(a){a.preventDefault();var b=$(this).parents(".product");$.ajax({url:location.href,type:"POST",data:{delete_product:b.attr("data-id")},success:function(a){try{var c=JSON.parse(a);switch(c.status){case"success":b.remove();break;default:console.log(a)}}catch(d){console.log(a)}},error:function(a){console.log(a)}})}),$(".service .delete").live("click",function(a){a.preventDefault();var b=$(this).parents(".service");$.ajax({url:location.href,type:"POST",data:{delete_service:b.attr("data-id")},success:function(a){try{var c=JSON.parse(a);switch(c.status){case"success":b.remove();break;default:console.log(a)}}catch(d){console.log(a)}},error:function(a){console.log(a)}})}),$(".logo input[type=file]").change(function(){if(0!=this.files.length){var b=$(".logo form"),c=new FormData(b[0]);c.append("file","logo"),$.ajax({url:location.href,type:"POST",data:c,enctype:"multipart/form-data",processData:!1,contentType:!1,success:function(a){"success"!=a&&console.log(a)},error:function(a){console.log(a)}})}})}});