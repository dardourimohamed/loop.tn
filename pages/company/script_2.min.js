page_script({init:function(){$.fn.editable.defaults.ajaxOptions={type:"POST"};$.fn.editable.defaults.type="text";$.fn.editable.defaults.pk=1;$.fn.editable.defaults.mode="inline";$.fn.editable.defaults.inputclass="form-control";$.fn.editable.defaults.url=location.href;$.fn.editable.defaults.onblur="submit";$.fn.editable.defaults.emptytext="Vide";$(".editable").editable({params:function(g){g.element="company";return g}});if($(".categories-editable").length>0){$(".categories-editable").editable({mode:"popup",inputclass:"input-medium",params:function(g){g.element="company";return g},select2:{multiple:true},source:JSON.parse($(".categories-editable").attr("data-available"))})}$(".seat_editable").editable({params:function(g){g.element="seat";return g}});$(".product_editable").editable({mode:"popup",params:function(g){g.element="product";return g}});$(".service_editable").editable({mode:"popup",params:function(g){g.element="service";return g}});$(".map-canvas").each(function(){$(this).locationpicker({location:{latitude:$(this).attr("data-latitude"),longitude:$(this).attr("data-longitude")},radius:0,zoom:13,enableAutocomplete:true,scrollwheel:false,onchanged:function(i,g,h){$.ajax({url:location.href,type:"POST",data:{geolocation:$(this).attr("data-pk"),latitude:i.latitude,longitude:i.longitude},success:function(j){try{var l=JSON.parse(j);if(l.status!="success"){console.log(j)}}catch(k){console.log(j)}},error:function(j){console.log(j)}})}})});$(".new_service").click(function(g){$.ajax({url:location.href,type:"POST",data:{new_service:true},success:function(h){try{var k=JSON.parse(h);switch(k.status){case"success":var j=$("#new_service_template").clone();j.removeAttr("id");j.prependTo("#services_list").show();j.attr("data-id",k.id);$(".service_editable",j).attr("data-pk",k.id).editable({value:null,mode:"popup",params:function(l){l.element="service";return l}});$(".delete",j).click(function(l){d(l,this)});$("input[type=file]",j).change(function(l){f(l,this)});$(".price_checkbox",j).change(e);$(".rent_price_checkbox",j).change(b);$("[href='#services_list']").click();$($(".thumbnail",j)[0]).pulsate({color:"#399bc3",repeat:2});break;default:console.log(h);break}}catch(i){console.log(h)}},error:function(h){console.log(h)}})});$(".new_product").click(function(g){$.ajax({url:location.href,type:"POST",data:{new_product:true},success:function(h){try{var k=JSON.parse(h);switch(k.status){case"success":var j=$("#new_product_template").clone();j.removeAttr("id");j.prependTo("#products_list").show();j.attr("data-id",k.id);$(".product_editable",j).attr("data-pk",k.id).editable({value:null,mode:"popup",params:function(l){l.element="product";return l}});$(".delete",j).click(function(l){a(l,this)});$("input[type=file]",j).change(function(l){c(l,this)});$(".price_checkbox",j).change(e);$(".rent_price_checkbox",j).change(b);$("[href='#products_list']").click();$($(".thumbnail",j)[0]).pulsate({color:"#399bc3",repeat:2});break;default:console.log(h);break}}catch(i){console.log(h)}},error:function(h){console.log(h)}})});var e=function(j){var g=$(this).parents("p");var h=$("[data-name=price]",g);var i=$(".unit",g);if($(this).prop("checked")){h.editable("enable");i.show()}else{$.post(location.href,{element:(h.hasClass("product_editable")?"product":"service"),pk:h.attr("data-pk"),name:"price",value:null},function(k){h.editable("setValue",null).editable("submit").editable("disable");i.hide()})}};var b=function(j){var g=$(this).parents("p");var h=$("[data-name=rent_price]",g);var i=$(".unit",g);if($(this).prop("checked")){h.editable("enable");i.show()}else{$.post(location.href,{element:(h.hasClass("product_editable")?"product":"service"),pk:h.attr("data-pk"),name:"rent_price",value:null},function(k){h.editable("setValue",null).editable("submit").editable("disable");i.hide()})}};$(".price_checkbox").change(e);$(".rent_price_checkbox").change(b);var a=function(i,h){i.preventDefault();var g=$(h).parents(".product");$.ajax({url:location.href,type:"POST",data:{delete_product:g.attr("data-id")},success:function(j){try{var l=JSON.parse(j);switch(l.status){case"success":g.remove();break;default:console.log(j);break}}catch(k){console.log(j)}},error:function(j){console.log(j)}})};var d=function(i,h){i.preventDefault();var g=$(h).parents(".service");$.ajax({url:location.href,type:"POST",data:{delete_service:g.attr("data-id")},success:function(j){try{var l=JSON.parse(j);switch(l.status){case"success":g.remove();break;default:console.log(j);break}}catch(k){console.log(j)}},error:function(j){console.log(j)}})};$(".service .delete").click(function(g){d(g,this)});$(".product .delete").click(function(g){a(g,this)});var c=function(j,g){if(g.files.length==0){return}var i=$(".product form");var h=new FormData(i[0]);h.append("file","product_image");h.append("pk",$(g).parents(".product").attr("data-id"));$.ajax({url:location.href,type:"POST",data:h,enctype:"multipart/form-data",processData:false,contentType:false,success:function(k){if(k!="success"){console.log(k)}},error:function(k){console.log(k)}})};var f=function(j,g){if(g.files.length==0){return}var i=$(".service form");var h=new FormData(i[0]);h.append("file","service_image");h.append("pk",$(g).parents(".service").attr("data-id"));$.ajax({url:location.href,type:"POST",data:h,enctype:"multipart/form-data",processData:false,contentType:false,success:function(k){if(k!="success"){console.log(k)}},error:function(k){console.log(k)}})};$(".service input[type=file]").change(function(g){f(g,this)});$(".product input[type=file]").change(function(g){c(g,this)});$(".logo input[type=file]").change(function(i){if(this.files.length==0){return}var h=$(".logo form");var g=new FormData(h[0]);g.append("file","logo");$.ajax({url:location.href,type:"POST",data:g,enctype:"multipart/form-data",processData:false,contentType:false,success:function(j){if(j!="success"){console.log(j)}},error:function(j){console.log(j)}})});$(".cover input[type=file]").change(function(i){if(this.files.length==0){return}var h=$(".cover form");var g=new FormData(h[0]);g.append("file","cover");$.ajax({url:location.href,type:"POST",data:g,enctype:"multipart/form-data",processData:false,contentType:false,success:function(j){if(j!="success"){console.log(j)}},error:function(j){console.log(j)}})})}});