page_script({init:function(){$.fn.editable.defaults.ajaxOptions={type:"POST"};$.fn.editable.defaults.type="text";$.fn.editable.defaults.pk=1;$.fn.editable.defaults.mode="popup";$.fn.editable.defaults.inputclass="form-control";$.fn.editable.defaults.url=location.href;$.fn.editable.defaults.onblur="submit";$.fn.editable.defaults.emptytext="Vide";$(".editable").editable();if($(".categories-editable").length>0){$(".categories-editable").editable({mode:"popup",inputclass:"input-medium",select2:{multiple:true},source:JSON.parse($(".categories-editable").attr("data-available"))})}$(".portfolio_editable").editable({mode:"popup",params:function(c){c.element="portfolio";return c}});$(".portfolio_categories_editable").editable({mode:"popup",params:function(c){c.element="portfolio";return c},source:JSON.parse($("input[name=available_portfolio_categories]").val()),select2:{multiple:true}});$(".skill_editable").editable({params:function(c){c.element="skill";return c}});$(".cv_editable").editable({params:function(c){c.element="cv";return c}});$(".cv_item_editable").editable({params:function(c){c.element="cv_item";return c}});$(".cv_item_project_editable").editable({params:function(c){c.element="cv_item_project";return c}});$(".new_portfolio").click(function(c){$.ajax({url:location.href,type:"POST",data:{new_portfolio:true},success:function(d){try{var g=JSON.parse(d);switch(g.status){case"success":var f=$("#new_portfolio_template").clone();f.removeAttr("id");f.prependTo(".portfolio_container").show();f.attr("data-id",g.id);$(".portfolio_editable",f).attr("data-pk",g.id).editable({value:null,mode:"popup",params:function(h){h.element="portfolio";return h}});$(".portfolio_categories_editable",f).attr("data-pk",g.id).editable({value:[],mode:"popup",params:function(h){h.element="portfolio";return h},source:JSON.parse($("input[name=available_portfolio_categories]").val()),select2:{multiple:true}});$(".delete",f).click(function(h){a(h,this)});$("input[type=file]",f).change(function(h){b(h,this)});$(".price_checkbox",f).change(price_checkbox);$(".rent_price_checkbox",f).change(rent_price_checkbox);$(".fb-like",f).attr("data-href",g.url);window.fbAsyncInit();$($(".thumbnail",f)[0]).pulsate({color:"#399bc3",repeat:2});break;default:console.log(d);break}}catch(e){console.log(d)}},error:function(d){console.log(d)}})});var a=function(f,d){f.preventDefault();var c=$(d).parents(".portfolio");$.ajax({url:location.href,type:"POST",data:{delete_portfolio:c.attr("data-id")},success:function(e){try{var h=JSON.parse(e);switch(h.status){case"success":c.remove();break;default:console.log(e);break}}catch(g){console.log(e)}},error:function(e){console.log(e)}})};$(".portfolio .delete").click(function(c){a(c,this)});var b=function(g,c){if(c.files.length==0){return}var f=$(".portfolio form");var d=new FormData(f[0]);d.append("file","portfolio_image");d.append("pk",$(c).parents(".portfolio").attr("data-id"));$.ajax({url:location.href,type:"POST",data:d,enctype:"multipart/form-data",processData:false,contentType:false,success:function(e){if(e!="success"){console.log(e)}},error:function(e){console.log(e)}})};$(".portfolio input[type=file]").change(function(c){b(c,this)});$(".remove_skill").live("click",function(){var c=$(this).parents(".skill_item");$.post(location.href,{remove:"skill",pk:c.attr("data-id")},function(d){try{var f=JSON.parse(d);switch(f.status){case"success":c.remove();break;default:console.log(d);break}}catch(e){console.log(d)}})});$(".remove_cv").live("click",function(){var c=$(this).parents(".cv_item");$.post(location.href,{remove:"cv",pk:c.attr("data-id")},function(d){try{var f=JSON.parse(d);switch(f.status){case"success":c.remove();break;default:console.log(d);break}}catch(e){console.log(d)}})});$(".remove_cv_item").live("click",function(){var c=$(this).parents(".cv_item_item");$.post(location.href,{remove:"cv_item",pk:c.attr("data-id")},function(d){try{var f=JSON.parse(d);switch(f.status){case"success":c.remove();break;default:console.log(d);break}}catch(e){console.log(d)}})});$(".remove_cv_item_project").live("click",function(){var c=$(this).parents(".cv_item_project_item");$.post(location.href,{remove:"cv_item_project",pk:c.attr("data-id")},function(d){try{var f=JSON.parse(d);switch(f.status){case"success":c.remove();break;default:console.log(d);break}}catch(e){console.log(d)}})});$(".add_skill").live("click",function(){var c=$(".skill_container");$.post(location.href,{add:"skill"},function(d){try{var f=JSON.parse(d);switch(f.status){case"success":skill=$(".templates tr.skill_item").clone();skill.appendTo(c);skill.attr("data-id",f.id);$(".skill_editable",skill).attr("data-pk",f.id).editable({params:function(g){g.element="skill";return g}});break;default:console.log(d);break}}catch(e){console.log(d)}})});$(".add_cv").live("click",function(){var c=$(".cv_container");$.post(location.href,{add:"cv"},function(d){try{var g=JSON.parse(d);switch(g.status){case"success":var e=$(".templates .cv_item").clone();e.appendTo(c);e.attr("data-id",g.id);$(".cv_editable",e).attr("data-pk",g.id).editable({params:function(h){h.element="cv";return h}});break;default:console.log(d);break}}catch(f){console.log(d)}})});$(".add_cv_item").live("click",function(){var c=$(this).parents(".cv_item").children(".panel-body").children(".cv_item_container");$.post(location.href,{add:"cv_item",cv:$(this).parents("[data-id]").attr("data-id")},function(d){try{var g=JSON.parse(d);switch(g.status){case"success":var e=$(".templates .cv_item_item").clone();e.appendTo(c);e.attr("data-id",g.id);$(".cv_item_editable",e).attr("data-pk",g.id).editable({params:function(h){h.element="cv_item";return h}});break;default:console.log(d);break}}catch(f){console.log(d)}})});$(".add_cv_item_project").live("click",function(){var c=$(this).parents(".cv_item_item").children(".list-group").children(".cv_item_project_container");$.post(location.href,{add:"cv_item_project",cv_item:$(this).parents("[data-id]").attr("data-id")},function(d){try{var g=JSON.parse(d);switch(g.status){case"success":var f=$(".templates .cv_item_project_item").clone();f.appendTo(c);f.attr("data-id",g.id);$(".cv_item_project_editable",f).attr("data-pk",g.id).editable({params:function(h){h.element="cv_item_project";return h}});break;default:console.log(d);break}}catch(e){console.log(d)}})});$(".map-canvas").each(function(){$(this).locationpicker({location:{latitude:$(this).attr("data-latitude"),longitude:$(this).attr("data-longitude")},radius:0,zoom:13,enableAutocomplete:true,scrollwheel:false,onchanged:function(e,c,d){$.ajax({url:location.href,type:"POST",data:{geolocation:true,latitude:e.latitude,longitude:e.longitude},success:function(f){try{var h=JSON.parse(f);if(h.status!="success"){console.log(f)}}catch(g){console.log(f)}},error:function(f){console.log(f)}})}})});$(".image input[type=file]").change(function(f){if(this.files.length==0){return}var d=$(".image form");var c=new FormData(d[0]);c.append("file","image");$.ajax({url:location.href,type:"POST",data:c,enctype:"multipart/form-data",processData:false,contentType:false,success:function(e){if(e!="success"){console.log(e)}},error:function(e){console.log(e)}})});window.fbAsyncInit()}});