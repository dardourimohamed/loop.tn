page_script({init:function(){$.fn.editable.defaults.ajaxOptions={type:"POST"};$.fn.editable.defaults.type="text";$.fn.editable.defaults.pk=1;$.fn.editable.defaults.mode="popup";$.fn.editable.defaults.inputclass="form-control";$.fn.editable.defaults.url=location.href;$.fn.editable.defaults.onblur="submit";$.fn.editable.defaults.emptytext="Vide";$(".editable").editable();if($(".categories-editable").length>0){$(".categories-editable").editable({mode:"popup",inputclass:"input-medium",select2:{multiple:true},source:JSON.parse($(".categories-editable").attr("data-available"))})}$(".skill_editable").editable({params:function(a){a.element="skill";return a}});$(".cv_editable").editable({params:function(a){a.element="cv";return a}});$(".cv_item_editable").editable({params:function(a){a.element="cv_item";return a}});$(".cv_item_project_editable").editable({params:function(a){a.element="cv_item_project";return a}});$(".remove_skill").live("click",function(){var a=$(this).parents(".skill_item");$.post(location.href,{remove:"skill",pk:a.attr("data-id")},function(b){try{var d=JSON.parse(b);switch(d.status){case"success":a.remove();break;default:console.log(b);break}}catch(c){console.log(b)}})});$(".remove_cv").live("click",function(){var a=$(this).parents(".cv_item");$.post(location.href,{remove:"cv",pk:a.attr("data-id")},function(b){try{var d=JSON.parse(b);switch(d.status){case"success":a.remove();break;default:console.log(b);break}}catch(c){console.log(b)}})});$(".remove_cv_item").live("click",function(){var a=$(this).parents(".cv_item_item");$.post(location.href,{remove:"cv_item",pk:a.attr("data-id")},function(b){try{var d=JSON.parse(b);switch(d.status){case"success":a.remove();break;default:console.log(b);break}}catch(c){console.log(b)}})});$(".remove_cv_item_project").live("click",function(){var a=$(this).parents(".cv_item_project_item");$.post(location.href,{remove:"cv_item_project",pk:a.attr("data-id")},function(b){try{var d=JSON.parse(b);switch(d.status){case"success":a.remove();break;default:console.log(b);break}}catch(c){console.log(b)}})});$(".add_skill").live("click",function(){var a=$(".skill_container");$.post(location.href,{add:"skill"},function(b){try{var d=JSON.parse(b);switch(d.status){case"success":skill=$(".templates tr.skill_item").clone();skill.appendTo(a);skill.attr("data-id",d.id);$(".skill_editable",skill).attr("data-pk",d.id).editable({params:function(e){e.element="skill";return e}});break;default:console.log(b);break}}catch(c){console.log(b)}})});$(".add_cv").live("click",function(){var a=$(".cv_container");$.post(location.href,{add:"cv"},function(b){try{var e=JSON.parse(b);switch(e.status){case"success":var c=$(".templates .cv_item").clone();c.appendTo(a);c.attr("data-id",e.id);$(".cv_editable",c).attr("data-pk",e.id).editable({params:function(f){f.element="cv";return f}});break;default:console.log(b);break}}catch(d){console.log(b)}})});$(".add_cv_item").live("click",function(){var a=$(this).parents(".cv_item").children(".panel-body").children(".cv_item_container");$.post(location.href,{add:"cv_item",cv:$(this).parents("[data-id]").attr("data-id")},function(b){try{var e=JSON.parse(b);switch(e.status){case"success":var c=$(".templates .cv_item_item").clone();c.appendTo(a);c.attr("data-id",e.id);$(".cv_item_editable",c).attr("data-pk",e.id).editable({params:function(f){f.element="cv_item";return f}});break;default:console.log(b);break}}catch(d){console.log(b)}})});$(".add_cv_item_project").live("click",function(){var a=$(this).parents(".cv_item_item").children(".list-group").children(".cv_item_project_container");$.post(location.href,{add:"cv_item_project",cv_item:$(this).parents("[data-id]").attr("data-id")},function(b){try{var e=JSON.parse(b);switch(e.status){case"success":var d=$(".templates .cv_item_project_item").clone();d.appendTo(a);d.attr("data-id",e.id);$(".cv_item_project_editable",d).attr("data-pk",e.id).editable({params:function(f){f.element="cv_item_project";return f}});break;default:console.log(b);break}}catch(c){console.log(b)}})});$(".map-canvas").each(function(){$(this).locationpicker({location:{latitude:$(this).attr("data-latitude"),longitude:$(this).attr("data-longitude")},radius:0,zoom:13,enableAutocomplete:true,scrollwheel:false,onchanged:function(c,a,b){$.ajax({url:location.href,type:"POST",data:{geolocation:true,latitude:c.latitude,longitude:c.longitude},success:function(d){try{var f=JSON.parse(d);if(f.status!="success"){console.log(d)}}catch(e){console.log(d)}},error:function(d){console.log(d)}})}})});$(".image input[type=file]").change(function(c){if(this.files.length==0){return}var b=$(".image form");var a=new FormData(b[0]);a.append("file","image");$.ajax({url:location.href,type:"POST",data:a,enctype:"multipart/form-data",processData:false,contentType:false,success:function(d){if(d!="success"){console.log(d)}},error:function(d){console.log(d)}})})}});