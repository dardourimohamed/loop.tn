page_script({init:function(){$("#login_form input[name=username]").focus();var a=function(){$(".username_error").hide(),$(".password_error").hide(),$(".waiting_restriction_time").hide(),$(".restricted_host").hide(),$(".unhandled_error").hide()};$("#login_form input[name=username]").change(a),$("#login_form input[name=password]").change(a),$("#login_form").ajaxForm({beforeSubmit:a,success:function(a){try{parsed=JSON.parse(a),"logged_in"==parsed.status?($(".top-menu .user-btn .username").text(parsed.params.displayname),$(".top-menu .login-btn").hide(),$(".top-menu .user-btn").show(),Layout.ajaxify(location.origin+"/account")):"username_error"==parsed.status?($(".username_error").show(),$("#login_form input[name=password]").val(""),$("#login_form input[name=username]").focus()):"waiting_restriction_time"==parsed.status?($(".waiting_restriction_time .remaining_time").text(parsed.params.remaining_time),$(".waiting_restriction_time").show(),$("#login_form input[name=password]").val(""),$("#login_form input[name=username]").focus()):"password_error"==parsed.status?($(".password_error .remaining_attempts").text(parsed.params.remaining_attempts),$(".password_error").show(),$("#login_form input[name=password]").val(""),$("#login_form input[name=password]").focus()):"restricted_host"==parsed.status?($(".restricted_host").show(),$("#login_form input[name=username]").val(""),$("#login_form input[name=password]").val(""),$("#login_form input[name=username]").focus()):(console.log(a),$(".unhandled_error").show())}catch(b){console.log(a),$(".unhandled_error").show()}},error:function(a){console.log(a),$(".unhandled_error").show()}})}});