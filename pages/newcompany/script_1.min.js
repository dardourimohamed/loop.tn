page_script({init:function(){if(!navigator.geolocation){var a=$("#find_my_position").parents(".input-group");a.before($("input",a)),a.remove()}$("#geolocation").locationpicker({location:{latitude:33.881967,longitude:9.560764},radius:0,zoom:6,enableAutocomplete:!0,inputBinding:{locationNameInput:$("#submit_form [name=address]"),latitudeInput:$("#submit_form [name=latitude]"),longitudeInput:$("#submit_form [name=longitude]")}}),$("#find_my_position").click(function(a){a.preventDefault(),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){$("#submit_form [name=latitude]").val(a.coords.latitude).change(),$("#submit_form [name=longitude]").val(a.coords.longitude).change()})});var b=$("#submit_form"),c=$(".alert-danger",b),d=$(".alert-success",b);b.validate({doNotHideMessage:!0,errorClass:"help-block help-block-error",focusInvalid:!0,rules:{name:{minlength:3,maxlength:255,required:!0},description:{minlength:50,maxlength:4095,required:!0},url:{required:!0,remote:{url:location.href,type:"post",data:{check_url:function(){return $("[name=url]",b).val()}}}},address:{required:!0},longitude:{required:!0},latitude:{required:!0},tel:{required:!0},email:{required:!0},offer:{required:!0},accept_contract:{required:!0},credit_card_number:{required:!0,creditcard:!0},credit_card_password:{required:!0}},invalidHandler:function(){d.hide(),c.show(),app.scrollTo(c,-200)},highlight:function(a){$(a).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},success:function(){},submitHandler:function(){d.show(),c.hide()}});var e=function(){$("#validation .form-control-static",b).each(function(){if("amount"==$(this).attr("data-display"))return $("strong",this).text($('[name="offer"]:checked',b).attr("data-amount")),void 0;var a=$('[name="'+$(this).attr("data-display")+'"]',b);a.is(":radio")&&(a=$('[name="'+$(this).attr("data-display")+'"]:checked',b)),a.is("select")?$("strong",this).text(a.find("option:selected").text()):a.is(":radio")&&a.is(":checked")?$("strong",this).text(a.attr("data-title")):$("strong",this).text(a.val())})},f=function(a,b,c){var d=b.find("li").length,f=c+1;$(".step-title",$("#page_wizard")).text("Step "+(c+1)+" of "+d),jQuery("li",$("#page_wizard")).removeClass("done");for(var g=b.find("li"),h=0;c>h;h++)jQuery(g[h]).addClass("done");1==f?$("#page_wizard").find(".button-previous").hide():$("#page_wizard").find(".button-previous").show(),f>=d?($("#page_wizard").find(".button-next").hide(),$("#page_wizard").find(".button-submit").show(),e()):($("#page_wizard").find(".button-next").show(),$("#page_wizard").find(".button-submit").hide()),app.scrollTo($(".page-title"))};$("#page_wizard").bootstrapWizard({nextSelector:".button-next",previousSelector:".button-previous",onTabClick:function(){return!1},onNext:function(a,e,g){return d.hide(),c.hide(),0==b.valid()?!1:(f(a,e,g),void 0)},onPrevious:function(a,b,e){d.hide(),c.hide(),f(a,b,e)},onTabShow:function(a,b,c){var d=b.find("li").length,e=c+1,f=100*(e/d);$("#page_wizard").find(".progress-bar").css({width:f+"%"})}}),$("#page_wizard").find(".button-previous").hide(),$("#page_wizard .button-submit").hide(),$("#submit_form").ajaxForm({success:function(){},error:function(a){console.log(a)}})}});