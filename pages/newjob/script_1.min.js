page_script({init:function(){if(!navigator.geolocation){var c=$("#find_my_position").parents(".input-group");c.before($("input",c));c.remove()}$("#geolocation").locationpicker({location:{latitude:33.881967,longitude:9.560764},radius:0,zoom:6,enableAutocomplete:!0,scrollwheel:!1,inputBinding:{locationNameInput:$("#submit_form [name=address]"),latitudeInput:$("#submit_form [name=latitude]"),longitudeInput:$("#submit_form [name=longitude]")}});$("#find_my_position").click(function(a){a.preventDefault();
navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){$("#submit_form [name=latitude]").val(a.coords.latitude).change();$("#submit_form [name=longitude]").val(a.coords.longitude).change()})});var b=$("#submit_form"),e=$(".alert-danger.form-error",b);b.validate({ignore:"",errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!0,rules:{name:{minlength:3,maxlength:255,required:!0},description:{minlength:50,maxlength:4095,required:!0},categories:{required:!0},
address:{required:!0},longitude:{required:!0},latitude:{required:!0},tel:{required:!0},email:{required:!0}},invalidHandler:function(a,d){e.show()},highlight:function(a){$(a).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},success:function(a){},errorPlacement:function(a,d){switch($(d).attr("name")){default:a.insertAfter(d)}},submitHandler:function(a){e.hide()}});$("[name='categories[]']",b).select2();
b.submit(function(a){if(!b.valid())return a.preventDefault(),!1;app.blockUI({iconOnly:!0,animate:!0});$.ajax({url:location.href,type:"POST",data:$(b).serialize(),success:function(a){app.unblockUI();try{switch(p=JSON.parse(a),p.status){case "success":app.ajaxify(p.params.job_url);break;default:return console.log(p),!1}}catch(b){return console.log(a),!1}},error:function(a){app.unblockUI();console.log(a);return!1}})});$("[name=name]",b).focus()}});
