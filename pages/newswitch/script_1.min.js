page_script({init:function(){$("input[name=type]").change(function(){$("a[href=#title"+$("input[name=type]:checked").val()+"]").tab("show")});if(!navigator.geolocation){var a=$("#job_find_my_position").parents(".input-group");a.before($("input",a));a.remove()}$("#job_geolocation").locationpicker({location:{latitude:33.881967,longitude:9.560764},radius:0,zoom:6,enableAutocomplete:true,scrollwheel:false,inputBinding:{locationNameInput:$("#job_submit_form [name=job_address]"),latitudeInput:$("#job_submit_form [name=job_latitude]"),longitudeInput:$("#job_submit_form [name=job_longitude]"),}});$("#job_find_my_position").click(function(f){f.preventDefault();if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(e){$("#job_submit_form [name=job_latitude]").val(e.coords.latitude).change();$("#job_submit_form [name=job_longitude]").val(e.coords.longitude).change()})}});var c=$("#job_submit_form");var b=$(".alert-danger.form-error",c);var d=c.validate({ignore:"",errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:true,rules:{name:{minlength:3,maxlength:255,required:true},description:{minlength:50,maxlength:4095,required:true},categories:{required:true},address:{required:true},longitude:{required:true},latitude:{required:true},tel:{required:true},email:{required:true}},invalidHandler:function(f,e){b.show()},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){},errorPlacement:function(e,f){switch($(f).attr("job_name")){default:e.insertAfter(f);break}},submitHandler:function(e){b.hide()}});$("[name='job_categories[]']",c).select2();c.submit(function(f){if(!c.valid()){f.preventDefault();return false}app.blockUI({iconOnly:true,animate:true});$.ajax({url:location.href,type:"POST",data:$(c).serialize(),success:function(e){app.unblockUI();try{p=JSON.parse(e);switch(p.status){case"success":$("#success_msg .goto_job").attr("href",p.params.job_url);$("#page_wizard").remove();$("#success_msg").show();break;default:console.log(p);return false;break}}catch(g){console.log(e);return false}},error:function(e){app.unblockUI();console.log(e);return false}})});$("[name=job_name]",c).focus();if(!navigator.geolocation){var a=$("#company_find_my_position").parents(".input-group");a.before($("input",a));a.remove()}$("#company_geolocation").locationpicker({location:{latitude:33.881967,longitude:9.560764},radius:0,zoom:6,enableAutocomplete:true,scrollwheel:false,inputBinding:{locationNameInput:$("#company_submit_form [name=company_address]"),latitudeInput:$("#company_submit_form [name=company_latitude]"),longitudeInput:$("#company_submit_form [name=company_longitude]"),}});$("#company_find_my_position").click(function(f){f.preventDefault();if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(e){$("#company_submit_form [name=company_latitude]").val(e.coords.latitude).change();$("#company_submit_form [name=company_longitude]").val(e.coords.longitude).change()})}});var c=$("#company_submit_form");var b=$(".alert-danger.form-error",c);var d=c.validate({ignore:"",errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:true,rules:{name:{minlength:3,maxlength:255,required:true},description:{minlength:50,maxlength:4095,required:true},categories:{required:true},url:{minlength:5,remote:{url:location.href,type:"post",data:{check_url:function(){return $("[name=company_url]",c).val()}}}},address:{required:true},longitude:{required:true},latitude:{required:true},tel:{required:true},email:{required:true}},invalidHandler:function(f,e){b.show()},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){},errorPlacement:function(e,f){switch($(f).attr("company_name")){case"url":e.appendTo($(f.parents(".form-group")[0]).find(".error_msg"));break;default:e.insertAfter(f);break}},submitHandler:function(e){b.hide()}});$("[name='company_categories[]']",c).select2();c.submit(function(f){if(!c.valid()){f.preventDefault();return false}app.blockUI({iconOnly:true,animate:true});$.ajax({url:location.href,type:"POST",data:$(c).serialize(),success:function(e){app.unblockUI();try{p=JSON.parse(e);switch(p.status){case"success":$("#success_msg .goto_company").attr("href",p.params.company_url);$("#page_wizard").remove();$("#success_msg").show();break;default:console.log(p);return false;break}}catch(g){console.log(e);return false}},error:function(e){app.unblockUI();console.log(e);return false}})});$("[name=company_name]",c).focus()}});