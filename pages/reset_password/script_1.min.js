page_script({init:function(){$("#reset_form input[name=password]").focus();var a=function(){var b=$("#reset_form input[name=password]");if($("#reset_form input[name=password]").val().length<8){b.closest(".form-group").removeClass("has-success").addClass("has-error");$(".fa-check",b.closest(".form-group")).remove();b.before('<i class="icon-ban"></i>');$("#password_min_length_error").show();b.focus()}else{$(".icon-ban",b.closest(".form-group")).remove();b.closest(".form-group").removeClass("has-error").removeClass("has-success");$("#password_min_length_error").hide()}var b=$("#password_confirmation");if($("#password_confirmation").val()==""||$("#password_confirmation").val()==$("#reset_form input[name=password]").val()){$(".icon-ban",b.closest(".form-group")).remove();b.closest(".form-group").removeClass("has-error").removeClass("has-success");$("#passwords_not_match").hide()}else{b.closest(".form-group").removeClass("has-success").addClass("has-error");$(".fa-check",$("#password_confirmation").closest(".form-group")).remove();b.before('<i class="icon-ban"></i>');$("#passwords_not_match").show();$("#password_confirmation").focus()}};$("#reset_form input[name=password]").change(a);$("#password_confirmation").change(a);$("#reset_form").submit(function(b){b.preventDefault();if($("#password_confirmation").val()!=$("#reset_form input[name=password]").val()){return false}$.post(location.href,$(this).serialize(),function(c){try{parsed=JSON.parse(c);if(parsed.status=="logged_in"){$(".top-menu .user-btn .username").text(parsed.params.displayname);$(".top-menu .login-btn").hide();$(".top-menu .user-btn").show();app.ajaxify(parsed.params.goto_page)}else{if(parsed.status=="password_min_length_error"){var d=$("#reset_form input[name=password]");d.closest(".form-group").removeClass("has-success").addClass("has-error");$(".fa-check",d.closest(".form-group")).remove();d.before('<i class="icon-ban"></i>');$("#password_min_length_error").show();d.focus()}else{console.log(c);$(".unhandled_error").show()}}}catch(e){console.log(c);$(".unhandled_error").show()}});return false})}});