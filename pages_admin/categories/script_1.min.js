page_script({init:function(){$.fn.editable.defaults.ajaxOptions={type:"POST"};$.fn.editable.defaults.type="text";$.fn.editable.defaults.pk=1;$.fn.editable.defaults.mode="inline";$.fn.editable.defaults.inputclass="form-control";$.fn.editable.defaults.url=location.href;$.fn.editable.defaults.onblur="submit";$.fn.editable.defaults.emptytext="Vide";$(".category_editable").editable({params:function(a){a.element="category";return a}});$.getScript($("[data-jsload=sc1]").attr("data-href"),function(a,c,b){$(".dd").nestable({maxDepth:25,dropCallback:function(d,e){$.post(location.href,{move:d.sourceId,paste:d.destId},function(g){try{var f=JSON.parse(g);if(f.status!="success"){console.log(g)}}catch(h){console.log(g)}if(g!="success"){console.log(g)}})}})});$(".add_category").click(function(){$.post(location.href,{add_category:true},function(b){try{var a=JSON.parse(b);if(a.status=="success"){var d=$(".category_template").clone();d.attr("data-id",a.params.id).removeClass("hide").removeClass("category_template");$("[data-pk]",d).attr("data-pk",a.params.id);$(".dd-list.outer").append(d);$(".category_editable").editable({params:function(e){e.element="category";return e}})}else{console.log(b)}}catch(c){console.log(b)}})});$(".delete_category").live("click",function(){var a=$($(this).parents("[data-id]")[0]);$.post(location.href,{delete_category:a.attr("data-id")},function(c){try{var b=JSON.parse(c);if(b.status=="success"){a.remove()}else{console.log(c)}}catch(d){console.log(c)}})});$(".job_able").live("change",function(b){var a=$($(this).parents(".togglebutton")[0]);if(this.checked){$(".value",a).removeClass("hide")}else{$.post(location.href,{element:"category",pk:$(a.parents("[data-id]")[0]).attr("data-id"),name:"job_publish_price",value:null},function(c){$(".value .category_editable",a).editable("setValue",null).editable("submit");$(".value",a).addClass("hide")})}});$(".shop_able").live("change",function(b){var a=$($(this).parents(".togglebutton")[0]);if(this.checked){$(".value",a).removeClass("hide")}else{$.post(location.href,{element:"category",pk:$(a.parents("[data-id]")[0]).attr("data-id"),name:"shop_publish_price",value:null},function(c){$(".value .category_editable",a).editable("setValue",null).editable("submit");$(".value",a).addClass("hide")})}});$(".company_able").live("change",function(b){var a=$($(this).parents(".togglebutton")[0]);if(this.checked){$(".value",a).removeClass("hide")}else{$.post(location.href,{element:"category",pk:$(a.parents("[data-id]")[0]).attr("data-id"),name:"company_publish_price",value:null},function(c){$(".value .category_editable",a).editable("setValue",null).editable("submit");$(".value",a).addClass("hide")})}});$(".service_able").live("change",function(a){$.post(location.href,{element:"category",pk:$($(this).parents("[data-id]")[0]).attr("data-id"),name:"service",value:(this.checked?"1":"0")})});$(".product_able").live("change",function(a){$.post(location.href,{element:"category",pk:$($(this).parents("[data-id]")[0]).attr("data-id"),name:"product",value:(this.checked?"1":"0")})});$(".category_icon input").live("change",function(c){var b=$("i",$($(this).parents(".category_icon")[0]));var a=$(this);$.post(location.href,{element:"category",pk:$($(this).parents("[data-id]")[0]).attr("data-id"),name:"icon",value:$(this).val()},function(d){b.attr("class",a.val())})})}});